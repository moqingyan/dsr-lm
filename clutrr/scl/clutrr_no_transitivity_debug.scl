// CLUTRR Scallop

// question :: (sub, obj) represents a question asking about relation between `sub` and `obj`
type question(sub: String, obj: String)

// context :: (rela, sub, obj) represents there is a `rela` between `sub` and `obj`
type context(rela: usize, sub: String, obj: String)

// Relation level higher-order relationships
type transitive(r1: usize, r2: usize, r3: usize)

// Things can be derived through context propagation
rel derived(r, s, o) = context(r, s, o)

// Transitive
rel derived(r3, x, z) = transitive(r1, r2, r3), derived(r1, x, y), derived(r2, y, z), x != z

// Answer
rel answer(r) = question(s, o), derived(r, s, o)

rel context = {
    (9, "martin", "ethel"),
    (9, "leila", "ethel"),
    (1, "ethel", "judy"),
    (4, "gordon", "larry"),
    (2, "ethel", "gordon"),
    (1, "henry", "leila"),
    (7, "leila", "henry"),
    (1, "gordon", "leila"),
    (2, "larry", "gordon")
}
rel transitive = {0.4999799132347107::(2, 12, 11), 0.499799907207489::(0, 19, 5), 0.4997258186340332::(2, 5, 0), 0.4996855556964874::(1, 13, 16), 0.499650776386261::(12, 9, 6), 0.4996507167816162::(12, 13, 1), 0.49961647391319275::(19, 9, 1), 0.49959754943847656::(19, 8, 1), 0.49957430362701416::(1, 7, 4), 0.49948936700820923::(5, 16, 13), 0.4994330108165741::(9, 12, 5), 0.49919992685317993::(1, 18, 16), 0.49915263056755066::(17, 6, 4), 0.49912965297698975::(3, 4, 9), 0.4990716576576233::(4, 5, 0), 0.49906104803085327::(0, 17, 14), 0.4989416003227234::(11, 6, 11), 0.4989337623119354::(12, 11, 18), 0.498887836933136::(18, 7, 14), 0.4988659620285034::(19, 8, 6), 0.4987969398498535::(3, 11, 5), 0.49878764152526855::(14, 5, 5), 0.49876073002815247::(16, 16, 11), 0.498695969581604::(18, 8, 0), 0.49862924218177795::(2, 13, 2), 0.49862396717071533::(16, 1, 8), 0.4985964596271515::(18, 4, 5), 0.49857115745544434::(1, 1, 17), 0.4985191226005554::(16, 7, 10), 0.49850717186927795::(13, 10, 10), 0.49848976731300354::(0, 12, 16), 0.4984772801399231::(10, 9, 0), 0.49847251176834106::(0, 0, 11), 0.4984034299850464::(2, 8, 4), 0.49837395548820496::(12, 3, 6), 0.49835845828056335::(12, 7, 4), 0.4982800781726837::(10, 4, 10), 0.4981911778450012::(9, 6, 0), 0.49816039204597473::(15, 1, 9), 0.4981422424316406::(13, 3, 3), 0.4981347918510437::(18, 15, 6), 0.4980921745300293::(12, 14, 18), 0.4980732500553131::(13, 14, 16), 0.4980643689632416::(5, 16, 1), 0.49803629517555237::(12, 8, 16), 0.49786242842674255::(9, 12, 12), 0.4977928400039673::(8, 8, 1), 0.497768759727478::(5, 14, 16), 0.49769970774650574::(13, 10, 18), 0.49769508838653564::(11, 18, 14), 0.49769288301467896::(13, 15, 17), 0.4976343512535095::(9, 11, 11), 0.4974781274795532::(18, 19, 14), 0.4973336458206177::(5, 2, 12), 0.49731940031051636::(7, 11, 1), 0.4973129630088806::(4, 10, 1), 0.4971935451030731::(2, 9, 13), 0.4971672296524048::(0, 7, 5), 0.4971058964729309::(0, 10, 15), 0.4968395233154297::(12, 10, 17), 0.4968302845954895::(1, 11, 0), 0.4967598021030426::(7, 15, 15), 0.49656209349632263::(16, 0, 14), 0.4965519905090332::(16, 2, 7), 0.49650928378105164::(19, 3, 13), 0.49645891785621643::(0, 3, 3), 0.4964190125465393::(3, 1, 9), 0.49635547399520874::(1, 18, 6), 0.49627751111984253::(17, 7, 2), 0.4961782991886139::(2, 5, 4), 0.49599993228912354::(13, 16, 3), 0.49594825506210327::(0, 10, 6), 0.4959211051464081::(6, 2, 0), 0.4958418905735016::(17, 15, 3), 0.49567198753356934::(18, 10, 10), 0.49558472633361816::(18, 16, 11), 0.49539822340011597::(17, 14, 4), 0.4953616261482239::(1, 5, 5), 0.49534153938293457::(2, 17, 16), 0.49508893489837646::(11, 16, 13), 0.49500784277915955::(18, 17, 4), 0.49489936232566833::(2, 0, 7), 0.49478405714035034::(8, 5, 14), 0.4947749078273773::(10, 4, 3), 0.4947430491447449::(18, 15, 2), 0.49472424387931824::(0, 10, 13), 0.4946839511394501::(8, 16, 15), 0.49460554122924805::(18, 6, 6), 0.4945293962955475::(2, 14, 9), 0.49449312686920166::(1, 7, 5), 0.494414359331131::(11, 1, 0), 0.4944010078907013::(12, 8, 4), 0.49435463547706604::(0, 0, 17), 0.4943203628063202::(7, 4, 6), 0.494284451007843::(19, 13, 18), 0.49425193667411804::(10, 10, 2), 0.49413368105888367::(13, 8, 17), 0.4941283166408539::(12, 8, 8), 0.49412068724632263::(9, 13, 14), 0.49401211738586426::(16, 18, 12), 0.4938925504684448::(18, 8, 6), 0.4938661754131317::(2, 0, 4), 0.4937368929386139::(7, 8, 19), 0.49372532963752747::(9, 2, 14), 0.49371638894081116::(6, 1, 5), 0.4937140941619873::(18, 6, 13), 0.4936797022819519::(7, 15, 7), 0.49359163641929626::(4, 1, 18), 0.49354812502861023::(19, 13, 10), 0.49349138140678406::(4, 16, 0), 0.49338269233703613::(10, 1, 3), 0.49333471059799194::(8, 14, 17), 0.49323809146881104::(5, 14, 13), 0.4930487871170044::(10, 11, 3), 0.4930078387260437::(16, 1, 14), 0.49297839403152466::(10, 6, 12), 0.4929637610912323::(18, 8, 19), 0.49281278252601624::(7, 0, 8), 0.49279889464378357::(11, 17, 5), 0.49278926849365234::(18, 8, 1), 0.49278903007507324::(7, 17, 4), 0.49275973439216614::(6, 1, 7), 0.49275481700897217::(14, 10, 1), 0.4927298128604889::(8, 0, 15), 0.4924599230289459::(5, 3, 2), 0.49245792627334595::(4, 16, 14), 0.4923830032348633::(5, 13, 1), 0.4923577606678009::(6, 7, 7), 0.4923152029514313::(12, 8, 1), 0.4922688603401184::(10, 2, 16), 0.49219566583633423::(18, 5, 4), 0.4921950697898865::(1, 13, 8), 0.49217766523361206::(0, 2, 12), 0.4920305609703064::(9, 9, 18), 0.49181079864501953::(11, 15, 11), 0.4915930926799774::(2, 16, 18), 0.49153539538383484::(7, 13, 7), 0.49134647846221924::(10, 16, 14), 0.49134302139282227::(3, 8, 0), 0.49128061532974243::(17, 7, 4), 0.49114593863487244::(12, 3, 12), 0.4911237359046936::(6, 4, 18), 0.49106496572494507::(14, 12, 19), 0.49103879928588867::(7, 16, 19), 0.49101701378822327::(10, 0, 9), 0.49096575379371643::(12, 9, 0), 0.49075064063072205::(3, 6, 13), 0.49058714509010315::(19, 11, 19), 0.4905092418193817::(9, 19, 8), 0.49050748348236084::(9, 18, 18)}
rel question = {("martin", "judy")}

query answer
